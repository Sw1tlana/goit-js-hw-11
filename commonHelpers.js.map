{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchForm = document.getElementById(\"searchForm\");\nconst galleryImages = document.querySelector(\"ul.gallery\");\n\nconst BASE_API = \"https://pixabay.com/api\";\nconst API_Key = \"41802498-7aef04e1b4b4791f33c618bc1\";\n\ndocument.querySelector(\".loader\").style.display = \"none\";   \n\nsearchForm.addEventListener(\"submit\", searchFormSubmit);\n\nfunction clearGallery() {\n    galleryImages.innerHTML = \"\";\n}\n\nfunction searchFormSubmit (evt) {\n    evt.preventDefault();\n    const form = evt.currentTarget;\n    const query = form.elements.searchQuery.value.trim();\n\n    clearGallery();\n \n    const url = `${BASE_API}?key=${API_Key}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n    document.querySelector(\".loader\").style.display = \"block\";\n    \n      console.log(query);\n    setTimeout(() => {\n        fetchImages(url)\n            .then((data) => {\n                if (!data.total) {\n                    document.querySelector(\".loader\").style.display = \"none\";\n                    return iziToast.error({\n                        message: 'Sorry, there are no images matching your search query. Please try again!',\n                        messageColor: '#ffffff',\n                        backgroundColor: '#EF4040',\n                        position: 'topRight',\n                        maxWidth: '432px',\n                        close: false\n                    });\n                }\n                document.querySelector(\".loader\").style.display = \"none\";\n                renderImages(data.hits);\n            })\n            .catch(onFetchError)\n            .finally(() => {\n                form.reset()\n            });\n    },500);\n }\n\nfunction fetchImages(url) {\n  return fetch(url)\n       .then((response) => {\n           if (!response.ok) {\n               throw new Error(response.status);\n           }\n           return response.json();\n       })\n    }    \n     \nfunction renderImages(images) {\nconst markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `\n <li class=\"gallery-item\">\n <a class=\"link-gallery\" href=\"${largeImageURL}\">\n <img class=\"gallery-images\" src=\"${webformatURL}\" alt=\"${tags}\">\n </a>\n <div class=\"photo-info\">\n     <p class=\"info-number\"><strong>Like</strong> ${likes}</p>\n     <p class=\"info-number\"><strong>Views</strong> ${views}</p>\n     <p class=\"info-number\"><strong>Comments</strong> ${comments}</p>\n     <p class=\"info-number\"><strong>Downloads</strong> ${downloads}</p> \n </div>\n </li>\n`\n}).join(\"\");\n\ngalleryImages.insertAdjacentHTML(\"beforeend\", markup);\n    \nconst lightbox = new SimpleLightbox(document.querySelectorAll('ul.gallery a'));\n\n    lightbox.refresh();\n}\n\n  \n\nfunction onFetchError(error) {\n    console.log(error);\n}"],"names":["searchForm","galleryImages","BASE_API","API_Key","searchFormSubmit","clearGallery","evt","form","query","url","fetchImages","data","iziToast","renderImages","onFetchError","response","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","error"],"mappings":"6vBAMA,MAAMA,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAgB,SAAS,cAAc,YAAY,EAEnDC,EAAW,0BACXC,EAAU,qCAEhB,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,OAElDH,EAAW,iBAAiB,SAAUI,CAAgB,EAEtD,SAASC,GAAe,CACpBJ,EAAc,UAAY,EAC9B,CAEA,SAASG,EAAkBE,EAAK,CAC5BA,EAAI,eAAc,EAClB,MAAMC,EAAOD,EAAI,cACXE,EAAQD,EAAK,SAAS,YAAY,MAAM,OAE9CF,IAEA,MAAMI,EAAM,GAAGP,CAAQ,QAAQC,CAAO,MAAMK,CAAK,2DACjD,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,QAEhD,QAAQ,IAAIA,CAAK,EACnB,WAAW,IAAM,CACbE,EAAYD,CAAG,EACV,KAAME,GAAS,CACZ,GAAI,CAACA,EAAK,MACN,gBAAS,cAAc,SAAS,EAAE,MAAM,QAAU,OAC3CC,EAAS,MAAM,CAClB,QAAS,2EACT,aAAc,UACd,gBAAiB,UACjB,SAAU,WACV,SAAU,QACV,MAAO,EAC/B,CAAqB,EAEL,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,OAClDC,EAAaF,EAAK,IAAI,CACtC,CAAa,EACA,MAAMG,CAAY,EAClB,QAAQ,IAAM,CACXP,EAAK,MAAO,CAC5B,CAAa,CACR,EAAC,GAAG,CACP,CAEF,SAASG,EAAYD,EAAK,CACxB,OAAO,MAAMA,CAAG,EACV,KAAMM,GAAa,CAChB,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEnC,OAAOA,EAAS,MAC3B,CAAQ,CACH,CAEL,SAASF,EAAaG,EAAQ,CAC9B,MAAMC,EAASD,EAAO,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IACtF;AAAA;AAAA,iCAEsBL,CAAa;AAAA,oCACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,oDAGVC,CAAK;AAAA,qDACJC,CAAK;AAAA,wDACFC,CAAQ;AAAA,yDACPC,CAAS;AAAA;AAAA;AAAA,CAIjE,EAAE,KAAK,EAAE,EAEVvB,EAAc,mBAAmB,YAAagB,CAAM,EAEnC,IAAIQ,EAAe,SAAS,iBAAiB,cAAc,CAAC,EAEhE,QAAO,CACpB,CAIA,SAASX,EAAaY,EAAO,CACzB,QAAQ,IAAIA,CAAK,CACrB"}